<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Itinerary Generator - TravelPlan Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="../css/styles.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': '#2563eb',
                        'secondary': '#7c3aed',
                        'accent': '#f59e0b',
                    }
                }
            }
        }
    </script>
    <!-- ADD THIS LINE -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>

<body class="bg-gradient-to-br from-blue-50 to-purple-50 min-h-screen">

    <!-- Navigation -->
    <nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <a href="../index.html" class="text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
                        ğŸŒ TravelPlan Pro
                    </a>
                </div>
                <div class="hidden md:flex space-x-8 items-center">
                    <a href="../index.html" class="text-gray-600 hover:text-gray-900 transition">Home</a>
                    <a href="generator.html" class="text-gray-900 font-semibold border-b-2 border-blue-600 pb-1">Generator</a>
                    <a href="saved.html" class="text-gray-600 hover:text-gray-900 transition">My Trips</a>
                    <a href="destinations.html" class="text-gray-600 hover:text-gray-900 transition">Destinations</a>
                    <a href="budget.html" class="text-gray-600 hover:text-gray-900 transition">Budget Planner</a>
                    <a href="pages/recommender.html" class="text-gray-600 hover:text-gray-900 transition">Recommender</a>
                    <a href="pages/packing.html" class="text-gray-600 hover:text-gray-900 transition">Packing</a>

                    
                    <!-- Auth Info -->
                    <div id="auth-info" class="flex items-center gap-4 border-l pl-8">
                        <span id="auth-username" class="text-sm font-semibold text-gray-700"></span>
                        <button onclick="logout()" class="bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700 transition">Logout</button>
                    </div>
                </div>
                <button id="mobile-menu-btn" class="md:hidden text-gray-600">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
            </div>
        </div>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden bg-white border-t">
            <a href="../index.html" class="block px-4 py-2 text-gray-600 hover:bg-gray-50">Home</a>
            <a href="generator.html" class="block px-4 py-2 text-gray-900 font-semibold bg-blue-50">Generator</a>
            <a href="saved.html" class="block px-4 py-2 text-gray-600 hover:bg-gray-50">My Trips</a>
            <a href="destinations.html" class="block px-4 py-2 text-gray-600 hover:bg-gray-50">Destinations</a>
            <a href="budget.html" class="block px-4 py-2 text-gray-600 hover:bg-gray-50">Budget Planner</a>
        </div>
    </nav>

    <div class="max-w-6xl mx-auto px-4 py-8">

        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-extrabold text-gray-900 mb-3">
                AI Itinerary Generator
            </h1>
            <p class="text-lg text-gray-600">Create your personalized travel plan in seconds</p>
        </div>

        <div class="grid lg:grid-cols-3 gap-6">

            <!-- Input Form -->
            <div class="lg:col-span-1">
                <div class="bg-white rounded-xl shadow-xl p-6 sticky top-20">
                    <h2 class="text-xl font-bold mb-4 text-gray-900">Trip Details</h2>

                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                ğŸ“ Destination
                            </label>
                            <input type="text" id="destination" placeholder="e.g., Paris, France" 
                                   class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition">
                        </div>

                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                ğŸ“… Duration (Days)
                            </label>
                            <input type="number" id="duration" value="3" min="1" max="30"
                                   class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition">
                        </div>

                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                ğŸ’° Budget (USD)
                            </label>
                            <select id="budget" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition">
                                <option value="Budget-friendly">ğŸ’µ Budget (Rs.0-Rs.3000/day)</option>
                                <option value="Mid-range" selected>ğŸ’µğŸ’µ Mid-range (Rs.3000-Rs.20000/day)</option>
                                <option value="Luxury">ğŸ’µğŸ’µğŸ’µ Luxury (Rs.20000+/day)</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                ğŸ¯ Travel Style
                            </label>
                            <select id="travelStyle" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition">
                                <option value="Adventure">ğŸ”ï¸ Adventure</option>
                                <option value="Relaxation">ğŸ–ï¸ Relaxation</option>
                                <option value="Cultural">ğŸ›ï¸ Cultural & History</option>
                                <option value="Food">ğŸœ Food & Cuisine</option>
                                <option value="Nature">ğŸŒ³ Nature & Wildlife</option>
                                <option value="Mixed" selected>ğŸ­ Mixed Experience</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                ğŸ‘¥ Traveler Type
                            </label>
                            <select id="travelerType" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition">
                                <option value="Solo">ğŸ§ Solo Traveler</option>
                                <option value="Couple" selected>ğŸ’‘ Couple</option>
                                <option value="Family">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Family</option>
                                <option value="Friends">ğŸ‘¯ Friends Group</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                â„¹ï¸ Special Requirements
                            </label>
                            <textarea id="specialRequirements" placeholder="e.g., Vegetarian food, wheelchair accessible, child-friendly" rows="3"
                                      class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition"></textarea>
                        </div>

                        <button onclick="generateItinerary()" id="generate-btn"
                                class="w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white font-bold py-4 rounded-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition duration-300">
                            âœ¨ Generate Itinerary
                        </button>
                    </div>
                </div>
            </div>

            <!-- Output Section -->
            <div class="lg:col-span-2">

                <!-- Loading State -->
                <div id="loading" class="hidden bg-white rounded-xl shadow-xl p-12">
                    <div class="text-center">
                        <div class="inline-block">
                            <div class="flex space-x-2 mb-4">
                                <div class="w-4 h-4 bg-blue-600 rounded-full animate-bounce"></div>
                                <div class="w-4 h-4 bg-purple-600 rounded-full animate-bounce" style="animation-delay: 0.1s"></div>
                                <div class="w-4 h-4 bg-amber-600 rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
                            </div>
                        </div>
                        <h3 class="text-xl font-bold text-gray-900 mb-2">Creating Your Perfect Itinerary...</h3>
                        <p class="text-gray-600">Our AI is analyzing the best places and experiences for you</p>
                    </div>
                </div>

                <!-- Empty State -->
                <div id="empty-state" class="bg-white rounded-xl shadow-xl p-12 text-center">
                    <div class="text-6xl mb-4">âœˆï¸</div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-3">Ready to Plan?</h3>
                    <p class="text-gray-600 mb-6">Fill in your trip details and click "Generate Itinerary" to get started</p>
                    <div class="flex justify-center space-x-4">
                        <div class="bg-blue-50 px-4 py-2 rounded-lg">
                            <span class="text-sm text-blue-700 font-semibold">âœ“ AI-Powered</span>
                        </div>
                        <div class="bg-purple-50 px-4 py-2 rounded-lg">
                            <span class="text-sm text-purple-700 font-semibold">âœ“ Instant Results</span>
                        </div>
                        <div class="bg-amber-50 px-4 py-2 rounded-lg">
                            <span class="text-sm text-amber-700 font-semibold">âœ“ 100% Free</span>
                        </div>
                    </div>
                </div>

                <!-- Result Section -->
                <div id="result-section" class="hidden">
                    <div class="bg-white rounded-xl shadow-xl p-8">
                        <!-- Action Buttons -->
                        <div class="flex flex-wrap gap-3 mb-6 pb-6 border-b">
                            <button onclick="saveItinerary()" class="flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition">
                                <span>ğŸ’¾</span> Save Trip
                            </button>
                            <button onclick="exportItinerary()" class="flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition">
                                <span>ğŸ“„</span> Export
                            </button>
                            <button onclick="shareItinerary()" class="flex items-center gap-2 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition">
                                <span>ğŸ”—</span> Share
                            </button>
                            <button onclick="generateItinerary()" class="flex items-center gap-2 bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition">
                                <span>ğŸ”„</span> Regenerate
                            </button>
                        </div>

                        <!-- Chat Interface -->
<div id="chat-container" class="hidden bg-white rounded-xl shadow-xl p-6 mb-6">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
        <h3 style="font-size: 20px; font-weight: bold; color: #1f2937;">ğŸ¤– AI Itinerary Assistant</h3>
        <button onclick="toggleChat()" style="background: #f3f4f6; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer;">Ã—</button>
    </div>
    
    <div id="chat-messages" style="height: 300px; overflow-y: auto; background: #f9fafb; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
        <div style="text-align: center; color: #6b7280; padding: 20px;">
            <p style="margin-bottom: 10px;">ğŸ’¬ Ask me to modify your itinerary!</p>
            <p style="font-size: 12px;">Examples: "Add more beaches", "Make it cheaper", "Add adventure activities"</p>
        </div>
    </div>
    
    <div style="display: flex; gap: 10px;">
        <input type="text" id="chat-input" placeholder="Ask me anything about your trip..." 
               style="flex: 1; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 14px; outline: none;">
        <button onclick="sendChatMessage()" style="background: linear-gradient(135deg, #2563eb 0%, #7c3aed 100%); color: white; border: none; padding: 12px 20px; border-radius: 8px; cursor: pointer; font-weight: bold;">Send</button>
    </div>
</div>

                        
                        <!-- Itinerary Content -->
                        <div id="itinerary-content" class="prose max-w-none">
                            <!-- Content will be injected here -->
                        </div>

                        <!-- Sources -->
                        <div id="sources-section" class="mt-8 pt-6 border-t">
                            <h3 class="text-sm font-semibold text-gray-700 mb-3">ğŸ“š Sources Used:</h3>
                            <div id="sources-content" class="text-sm text-gray-600">
                                <!-- Sources will be injected here -->
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>

    </div>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-8 px-4 mt-12">
        <div class="max-w-7xl mx-auto text-center">
            <p class="text-gray-400">Â© 2025 TravelPlan Pro. Created by Raj Nikam.</p>
        </div>
    </footer>

    <script src="../js/auth.js"></script>
    <script src="../js/main.js"></script>
    <script src="../js/generator.js"></script>
    <script src="../js/storage.js"></script>

    <!-- Dark Mode Toggle -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    const darkModeToggle = document.createElement('button');
    darkModeToggle.id = 'dark-mode-btn';
    darkModeToggle.innerHTML = 'ğŸŒ™';
    darkModeToggle.style.cssText = `
        position: fixed;
        bottom: 20px;
        right: 20px;
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background: linear-gradient(135deg, #2563eb 0%, #7c3aed 100%);
        color: white;
        border: none;
        font-size: 24px;
        cursor: pointer;
        z-index: 999;
        box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        transition: all 0.3s;
    `;
    
    darkModeToggle.onmouseover = function() {
        this.style.transform = 'scale(1.15)';
        this.style.boxShadow = '0 6px 12px rgba(0,0,0,0.4)';
    };
    darkModeToggle.onmouseout = function() {
        this.style.transform = 'scale(1)';
        this.style.boxShadow = '0 4px 6px rgba(0,0,0,0.3)';
    };
    
    // Check saved preference
    if (localStorage.getItem('darkMode') === 'true') {
        enableDarkMode();
        darkModeToggle.innerHTML = 'â˜€ï¸';
    }
    
    darkModeToggle.onclick = function() {
        if (document.body.classList.contains('dark-mode')) {
            disableDarkMode();
            localStorage.setItem('darkMode', 'false');
            this.innerHTML = 'ğŸŒ™';
        } else {
            enableDarkMode();
            localStorage.setItem('darkMode', 'true');
            this.innerHTML = 'â˜€ï¸';
        }
    };
    
    document.body.appendChild(darkModeToggle);
});

function enableDarkMode() {
    document.body.classList.add('dark-mode');
    document.documentElement.style.colorScheme = 'dark';
    
    // Background
    document.body.style.background = '#0f172a';
    document.body.style.color = '#e2e8f0';
    
    // All cards and white backgrounds
    document.querySelectorAll('.bg-white, .bg-gradient-to-r').forEach(el => {
        if (el.classList.contains('bg-white')) {
            el.style.background = '#1e293b !important';
            el.style.color = '#e2e8f0 !important';
            el.style.borderColor = '#334155 !important';
        }
    });
    
    // Text colors
    document.querySelectorAll('.text-gray-900, .text-gray-800, .text-gray-700, .text-gray-600').forEach(el => {
        if (el.style.color !== 'white' && el.style.color !== 'rgb(255, 255, 255)') {
            el.style.color = '#e2e8f0 !important';
        }
    });
    
    // Input fields
    document.querySelectorAll('input, textarea, select').forEach(el => {
        el.style.background = '#1e293b';
        el.style.color = '#e2e8f0';
        el.style.borderColor = '#334155';
    });
    
    // Buttons (except gradient ones)
    document.querySelectorAll('button').forEach(el => {
        if (!el.classList.contains('bg-gradient-to-r') && 
            el.style.background !== 'linear-gradient(135deg, #2563eb 0%, #7c3aed 100%)' &&
            !el.style.background.includes('gradient')) {
            if (el.classList.contains('bg-gray-600') || el.classList.contains('bg-blue-600') || 
                el.classList.contains('bg-red-600')) {
                el.style.opacity = '0.9';
            }
        }
    });
    
    // Navigation
    document.querySelectorAll('nav').forEach(el => {
        el.style.background = '#1e293b !important';
        el.style.borderColor = '#334155 !important';
    });
}

function disableDarkMode() {
    document.body.classList.remove('dark-mode');
    document.documentElement.style.colorScheme = 'light';
    document.body.style.background = '';
    document.body.style.color = '';
    location.reload();
}
</script>

</body>
</html>
